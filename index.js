"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var analysisLocation=function(){function e(t){_classCallCheck(this,e),_defineProperty(this,"location",{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",port:"",protocol:"",search:""}),this._init(t)}return _createClass(e,[{key:"_init",value:function(t){var e=t.split("//"),n=e.slice(1).join("//").split("/"),r=n.slice(1).join("/").split("#"),t=r[0].split("?"),n=n[0].split(":");this.location.pathname="/"+this._omit(t[0]),this.location.hostname=n[0]?n[0]+"":"",this.location.port=n[1]?parseInt(n[1])+"":"",this.location.protocol=e[0]||"",this.location.hash=r[1]?"#"+r.slice(1).join("#"):"",this.location.search=t[1]?"?"+t.slice(1).join("?"):"",this._host(),this._origin(),this._host(),this._href()}},{key:"_omit",value:function(t){if("/"!=t.substr(-1))return t;t=_toConsumableArray(t);return t.pop(),t.join()}},{key:"_href",value:function(){var t=this.location,e=t.hash,n=t.protocol,r=t.pathname,t=t.search,e=n+"//"+this._host()+r+t+(e?"/"+e:"");return this.location.href=e}},{key:"_origin",value:function(){var t=this.location.protocol+"//"+this._host();return this.location.origin=t}},{key:"_host",value:function(){var t=this.location,e=t.hostname,t=t.port,t=e+(t?":"+t:"");return this.location.host=t}},{key:"_abalysisOrigin",value:function(t){var e=t.split("//"),t=e.slice(1).join("//").split("/")[0].split(":");return this.location.hostname=t[0]?t[0]+"":"",this.location.port=t[1]?parseInt(t[1])+"":"",this.location.protocol=e[0]||"",this.location.protocol+"//"+this._host()}},{key:"protocol",get:function(){return this.location.protocol},set:function(t){return this.location.protocol=t}},{key:"port",get:function(){return this.location.port},set:function(t){return this.location.port=t}},{key:"pathname",get:function(){return this.location.pathname},set:function(t){return this.location.pathname=t}},{key:"hostname",get:function(){return this.location.hostname},set:function(t){return this.location.hostname=t}},{key:"search",get:function(){return this.location.search},set:function(t){return this.location.search=t}},{key:"hash",get:function(){return this.location.hash},set:function(t){return this.location.hash=t}},{key:"host",get:function(){return this._host()},set:function(t){var e=t.split(":");return this.location.hostname=e[0],this.location.port=e[1]||"",this.location.host=t}},{key:"href",get:function(){return this._href()},set:function(t){return this._init(t),this._href()}},{key:"origin",get:function(){return this._origin()},set:function(t){t=this._abalysisOrigin(t);return this.location.origin=t}}]),e}(),parseRequest=function(){function e(t){_classCallCheck(this,e),_defineProperty(this,"parse",{}),_defineProperty(this,"appendParse",{}),this._init(t)}return _createClass(e,[{key:"_init",value:function(t){-1!=t.indexOf("?")&&(t=t.split("?")[1]),this._parseRequest(t)}},{key:"_parseRequest",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(!t)return this.parse={};var t=t.split("&"),e={};return t.forEach(function(t){t=t.split("=");e[t[0]]&&e[t[0]]instanceof Array||(e[t[0]]=[]),e[t[0]].push(t[1])}),this.parse=e}},{key:"_assign",value:function(){var t=this.parse,e=this.appendParse;return Object.assign(t,e)}},{key:"_has",value:function(t){var e=Object.hasOwnProperty;return e.call(this.parse,t)||e.call(this.appendParse,t)}},{key:"has",value:function(t){return this._has(t)}},{key:"get",value:function(t){return this.getAll(t)[0]||null}},{key:"set",value:function(t,e){return this.appendParse={},this.parse=_defineProperty({},t,[e])}},{key:"getAll",value:function(t){if(!this.has(t))return[];var e=this.parse[t],t=this.appendParse[t];return e&&t?[].concat(_toConsumableArray(e),_toConsumableArray(t)):e||t}},{key:"append",value:function(t,e){this.appendParse[t]&&this.appendParse[t]instanceof Array?this.appendParse[t].push(e):this.appendParse[t]=[e]}},{key:"toString",value:function(){var t,n=this.parse,r=this.appendParse,o="";for(t in n)!function(e){Object.hasOwnProperty.call(n,e)&&n[e].forEach(function(t){o+="".concat(e,"=").concat(t,"&")})}(t);for(var e in r)!function(e){Object.hasOwnProperty.call(r,e)&&r[e].forEach(function(t){o+="".concat(e,"=").concat(t,"&")})}(e);return o.substr(0,o.length-1)}},{key:"toParse",value:function(){var t=this.toString().split("&"),e={};return t.forEach(function(t){t=t.split("=");e[t[0]]=t[1]}),e}},{key:"delete",value:function(t){delete this.parse[t],delete this.appendParse[t]}},{key:"keys",value:function(){return Object.keys(this._assign())}},{key:"values",value:function(){var t=Object.values(this.parse),e=Object.values(this.appendParse);return[].concat(_toConsumableArray(t),_toConsumableArray(e)).flat()}}]),e}();analysisLocation.parseRequest=parseRequest,module.exports=analysisLocation;
